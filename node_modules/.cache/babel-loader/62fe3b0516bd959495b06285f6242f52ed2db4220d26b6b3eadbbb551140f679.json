{"ast":null,"code":"var _jsxFileName = \"/Users/cesarvargastapia/CascadeProjects/study-planner/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useLocalStorage } from './hooks/useLocalStorage';\nimport WeekNavigation from './components/WeekNavigation';\nimport DayView from './components/DayView';\nimport DayDetailModal from './components/DayDetailModal';\nimport { defaultActivities } from './data/defaultActivities';\nimport ProgressBar from './components/ProgressBar';\nimport { format, startOfWeek, addDays, parseISO, isBefore, startOfDay } from 'date-fns';\nimport { es } from 'date-fns/locale';\nimport CalendarModal from './components/CalendarModal';\nimport FrequencyModal from './components/FrequencyModal';\nimport SettingsModal from './components/SettingsModal';\nimport { encryptData, decryptData } from './auth/cryptoUtils';\n\n// Utilidad simple para generar UUID v4\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction generateUUID() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    const r = Math.random() * 16 | 0,\n      v = c === 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}\n\n// FunciÃ³n para limpiar actividades duplicadas\nconst cleanDuplicatedActivities = activities => {\n  if (!Array.isArray(activities)) return [];\n  const uniqueIds = new Set();\n  return activities.filter(activity => {\n    if (!activity || !activity.id) return false;\n    if (uniqueIds.has(activity.id)) return false;\n    uniqueIds.add(activity.id);\n    return true;\n  });\n};\nexport default function App() {\n  _s();\n  // ID Ãºnico de dispositivo confiable\n  const [deviceId] = useState(() => {\n    let id = localStorage.getItem('trustedDeviceId');\n    if (!id) {\n      id = generateUUID();\n      localStorage.setItem('trustedDeviceId', id);\n    }\n    return id;\n  });\n  const [user, setUser] = useState(null);\n  const [isAuthLoading, setIsAuthLoading] = useState(true);\n  // Hooks para control de login/registro\n  const [authMode, setAuthMode] = useState('login');\n  const [pendingUsername, setPendingUsername] = useState('');\n  const [loginError, setLoginError] = useState('');\n  const [currentWeek, setCurrentWeek] = useState(() => {\n    const today = new Date();\n    const monday = startOfWeek(today, {\n      weekStartsOn: 1\n    });\n    return format(monday, 'yyyy-MM-dd');\n  });\n\n  // Hook para datos de usuario actual (clave depende del usuario)\n  const [weeksData, setWeeksData] = useState({});\n\n  // Autologin si el dispositivo es confiable\n  useEffect(() => {\n    if (!user) {\n      const username = localStorage.getItem('lastLoggedUsername');\n      if (username) {\n        const trustedKey = `trustedDevices_${username}`;\n        let trusted = [];\n        try {\n          trusted = JSON.parse(localStorage.getItem(trustedKey)) || [];\n        } catch {}\n        if (trusted.includes(deviceId)) {\n          setUser({\n            username\n          });\n        }\n      }\n      setIsAuthLoading(false);\n    } else {\n      setIsAuthLoading(false);\n    }\n  }, [deviceId, user]);\n\n  // Cargar datos del usuario autenticado\n  useEffect(() => {\n    if (user && user.username) {\n      const key = `studyPlannerData_${user.username}`;\n      const stored = localStorage.getItem(key);\n      if (stored) {\n        try {\n          const parsedData = JSON.parse(stored);\n          // Limpiar datos duplicados al cargar\n          const cleanedData = {};\n          Object.entries(parsedData).forEach(([week, activities]) => {\n            cleanedData[week] = cleanDuplicatedActivities(activities);\n          });\n          setWeeksData(cleanedData);\n          // Guardar datos limpios\n          localStorage.setItem(key, JSON.stringify(cleanedData));\n        } catch (e) {\n          console.error('Error al cargar datos del usuario:', e);\n          setWeeksData({});\n        }\n      } else {\n        setWeeksData({});\n      }\n    } else {\n      setWeeksData({});\n    }\n  }, [user]);\n\n  // Guardar datos automÃ¡ticamente cuando cambian y hay usuario\n  useEffect(() => {\n    if (user && user.username) {\n      const key = `studyPlannerData_${user.username}`;\n      localStorage.setItem(key, JSON.stringify(weeksData));\n    }\n  }, [weeksData, user]);\n  const saveCredentials = async (username, password) => {\n    try {\n      const encrypted = await encryptData(JSON.stringify({\n        username\n      }), password);\n      localStorage.setItem('userCredentials', JSON.stringify(encrypted));\n      setUser({\n        username\n      });\n      setLoginError('');\n    } catch (error) {\n      setLoginError('Error al guardar credenciales');\n      console.error(error);\n    }\n  };\n  const loadCredentials = async password => {\n    try {\n      const encrypted = JSON.parse(localStorage.getItem('userCredentials'));\n      if (!encrypted) return null;\n      const data = await decryptData(encrypted, password);\n      return JSON.parse(data);\n    } catch (error) {\n      setLoginError('Credenciales invÃ¡lidas');\n      return null;\n    }\n  };\n  const handleLogin = async (username, mode = 'login') => {\n    // Obtiene la lista de usuarios\n    let userList = [];\n    try {\n      userList = JSON.parse(localStorage.getItem('userList')) || [];\n    } catch {}\n    if (mode === 'login') {\n      if (!userList.includes(username)) {\n        setLoginError('Ese usuario no existe. Â¿Quieres crear una cuenta?');\n        setAuthMode('register');\n        setPendingUsername(username);\n        return;\n      }\n    }\n\n    // Login directo por username\n    if (mode === 'login') {\n      setUser({\n        username\n      });\n      setLoginError('');\n      localStorage.setItem('lastLoggedUsername', username);\n      localStorage.setItem('hasHadUser', 'true');\n      // Agregar este dispositivo a la lista de confianza\n      const trustedKey = `trustedDevices_${username}`;\n      let trusted = [];\n      try {\n        trusted = JSON.parse(localStorage.getItem(trustedKey)) || [];\n      } catch {}\n      if (!trusted.includes(deviceId)) {\n        trusted.push(deviceId);\n        localStorage.setItem(trustedKey, JSON.stringify(trusted));\n      }\n    } else {\n      // Crear usuario nuevo\n      localStorage.setItem('lastLoggedUsername', username);\n      localStorage.setItem('hasHadUser', 'true');\n      if (!userList.includes(username)) {\n        userList.push(username);\n        localStorage.setItem('userList', JSON.stringify(userList));\n      }\n      const trustedKey = `trustedDevices_${username}`;\n      localStorage.setItem(trustedKey, JSON.stringify([deviceId]));\n      setUser({\n        username\n      });\n      setLoginError('');\n    }\n  };\n  const handleLogout = () => {\n    if (user && user.username) {\n      // Eliminar este dispositivo de la lista de confianza\n      const trustedKey = `trustedDevices_${user.username}`;\n      let trusted = [];\n      try {\n        trusted = JSON.parse(localStorage.getItem(trustedKey)) || [];\n      } catch {}\n      trusted = trusted.filter(id => id !== deviceId);\n      localStorage.setItem(trustedKey, JSON.stringify(trusted));\n    }\n    localStorage.removeItem('userCredentials');\n    localStorage.removeItem('lastLoggedUsername');\n    setUser(null);\n  };\n  useEffect(() => {\n    const initializeWeek = () => {\n      // Inicializar solo si la semana no existe o estÃ¡ vacÃ­a\n      if (weeksData[currentWeek] && weeksData[currentWeek].length > 0) return;\n      console.log(`Inicializando semana: ${currentWeek}`);\n\n      // Verificar si ya hay actividades para esta semana en localStorage\n      const storedWeekData = localStorage.getItem(`week_${currentWeek}`);\n      if (storedWeekData) {\n        // Si hay datos guardados, usarlos\n        try {\n          const parsedData = JSON.parse(storedWeekData);\n          setWeeksData(prev => ({\n            ...prev,\n            [currentWeek]: parsedData\n          }));\n          return;\n        } catch (e) {\n          console.error('Error al cargar datos de la semana:', e);\n        }\n      }\n\n      // Si no hay datos guardados, crear actividades por defecto\n      const newWeekActivities = Object.entries(defaultActivities).flatMap(([day, acts]) => acts.map(act => ({\n        ...act,\n        semana: currentWeek,\n        dia: day,\n        id: `${currentWeek}-${day}-${act.actividad}`.toLowerCase().replace(/\\s+/g, '-'),\n        completado: false\n      })));\n\n      // Guardar en localStorage para futuras cargas\n      localStorage.setItem(`week_${currentWeek}`, JSON.stringify(newWeekActivities));\n      setWeeksData(prev => ({\n        ...prev,\n        [currentWeek]: newWeekActivities\n      }));\n    };\n    initializeWeek();\n  }, [currentWeek, weeksData, setWeeksData]);\n  const currentWeekData = Array.isArray(weeksData[currentWeek]) ? weeksData[currentWeek] : [];\n  const allActivities = Object.values(weeksData).flat();\n  const handleToggleActivity = id => {\n    setWeeksData(prev => ({\n      ...prev,\n      [currentWeek]: prev[currentWeek].map(act => act.id === id ? {\n        ...act,\n        completado: !act.completado\n      } : act)\n    }));\n  };\n  const navigateWeek = direction => {\n    const currentMonday = parseISO(currentWeek);\n    const newMonday = addDays(currentMonday, direction === 'next' ? 7 : -7);\n    setCurrentWeek(format(newMonday, 'yyyy-MM-dd'));\n  };\n  const completedCount = currentWeekData.filter(a => a.completado).length;\n  const totalCount = currentWeekData.length;\n  const progress = totalCount > 0 ? Math.round(completedCount / totalCount * 100) : 0;\n  const getProgressBarEmoji = percentage => {\n    if (percentage === 100) return 'ðŸŽ‰';\n    if (percentage >= 75) return 'ðŸ’ª';\n    if (percentage >= 50) return 'ðŸš€';\n    if (percentage >= 25) return 'âœ¨';\n    return 'ðŸ“š';\n  };\n  const progressText = `Progreso: ${completedCount}/${totalCount} actividades ${getProgressBarEmoji(progress)}`;\n  const days = ['Lunes', 'Martes', 'MiÃ©rcoles', 'Jueves', 'Viernes', 'SÃ¡bado', 'Domingo'];\n\n  // Create a map to track unique activities by ID\n  const uniqueActivitiesMap = new Map();\n\n  // Filter out duplicates by using the activity ID\n  const uniqueActivities = (currentWeekData || []).filter(activity => {\n    if (!activity || !activity.id || !activity.dia) return false;\n\n    // If we've already seen this activity, skip it\n    if (uniqueActivitiesMap.has(activity.id)) {\n      return false;\n    }\n\n    // Otherwise, add it to our map and include it\n    uniqueActivitiesMap.set(activity.id, true);\n    return true;\n  });\n\n  // Group activities by day\n  const activitiesByDay = uniqueActivities.reduce((acc, activity) => {\n    const day = activity.dia;\n    if (!acc[day]) acc[day] = [];\n    acc[day].push(activity);\n    return acc;\n  }, {});\n\n  // Ensure all days exist in the object, even if empty\n  days.forEach(day => {\n    if (!activitiesByDay[day]) {\n      activitiesByDay[day] = [];\n    }\n  });\n  const getDayNumber = dayName => {\n    const dayIndex = days.indexOf(dayName);\n    if (dayIndex === -1) return '';\n    const weekStart = parseISO(currentWeek);\n    const dayDate = addDays(weekStart, dayIndex);\n    return format(dayDate, 'd');\n  };\n  const today = startOfDay(new Date());\n  const todayFormatted = format(today, 'yyyy-MM-dd');\n  const todayDayName = days[today.getDay() === 0 ? 6 : today.getDay() - 1];\n  const isCurrentDay = dayName => {\n    const weekStart = parseISO(currentWeek);\n    const dayIndex = days.indexOf(dayName);\n    const dayDate = addDays(weekStart, dayIndex);\n    const dayFormatted = format(dayDate, 'yyyy-MM-dd');\n    return dayFormatted === todayFormatted;\n  };\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [selectedDay, setSelectedDay] = useState(null);\n  const [notes, setNotes] = useState({});\n  const [completions, setCompletions] = useState({});\n  const [showFrequencyModal, setShowFrequencyModal] = useState(false);\n  const [isCalendarModalOpen, setIsCalendarModalOpen] = useState(false);\n  const [showSettingsModal, setShowSettingsModal] = useState(false);\n  const [customActivities, setCustomActivities] = useState({});\n  const handleSaveNotes = (dayKey, newNotes) => {\n    setNotes(prevNotes => ({\n      ...prevNotes,\n      [dayKey]: newNotes\n    }));\n  };\n  const handleCheckAll = dayKey => {\n    setWeeksData(prevWeeksData => {\n      const newWeeksData = {\n        ...prevWeeksData\n      };\n      newWeeksData[currentWeek] = newWeeksData[currentWeek].map(activity => activity.dia === dayKey ? {\n        ...activity,\n        completado: true\n      } : activity);\n      return newWeeksData;\n    });\n  };\n  const handleUncheckAll = dayKey => {\n    setWeeksData(prevWeeksData => {\n      const newWeeksData = {\n        ...prevWeeksData\n      };\n      newWeeksData[currentWeek] = newWeeksData[currentWeek].map(activity => activity.dia === dayKey ? {\n        ...activity,\n        completado: false\n      } : activity);\n      return newWeeksData;\n    });\n  };\n  const handleDayClick = day => {\n    setSelectedDay(day);\n    setIsModalOpen(true);\n  };\n  const handleCloseModal = () => {\n    setIsModalOpen(false);\n    setSelectedDay(null);\n  };\n  const handleOpenCalendar = () => {\n    setIsCalendarModalOpen(true);\n  };\n  const handleCloseCalendar = () => {\n    setIsCalendarModalOpen(false);\n  };\n  const handleOpenFrequency = () => {\n    setShowFrequencyModal(true);\n  };\n  const handleOpenSettings = () => {\n    setShowSettingsModal(true);\n  };\n  const handleAddActivity = (newActivity, day) => {\n    setWeeksData(prevWeeksData => {\n      const newWeeksData = {\n        ...prevWeeksData\n      };\n      const weekKey = currentWeek; // Use the current week from state\n\n      // Initialize the week if it doesn't exist\n      if (!newWeeksData[weekKey]) {\n        newWeeksData[weekKey] = [];\n      }\n\n      // Add the new activity with the correct structure\n      const activityToAdd = {\n        ...newActivity,\n        semana: weekKey,\n        dia: day,\n        id: `${weekKey}-${day}-${newActivity.actividad}-${Date.now()}`\n      };\n\n      // Check if activity with same ID already exists\n      const existingIndex = newWeeksData[weekKey].findIndex(act => act.id === activityToAdd.id);\n      if (existingIndex >= 0) {\n        // Update existing activity\n        newWeeksData[weekKey][existingIndex] = activityToAdd;\n      } else {\n        // Add new activity\n        newWeeksData[weekKey] = [...(newWeeksData[weekKey] || []), activityToAdd];\n      }\n\n      // Save to localStorage\n      localStorage.setItem('weeksData', JSON.stringify(newWeeksData));\n      return newWeeksData;\n    });\n  };\n  const handleCloseSettings = () => {\n    setShowSettingsModal(false);\n  };\n  const updateCompletions = (date, activityId, completed) => {\n    setCompletions(prev => {\n      const dateStr = date.toISOString().split('T')[0];\n      const newCompletions = {\n        ...prev\n      };\n      if (!newCompletions[dateStr]) {\n        newCompletions[dateStr] = {\n          completed: 0,\n          total: 0\n        };\n      }\n      // Update the count based on completion status\n      const activityDate = format(date, 'yyyy-MM-dd');\n      if (!newCompletions[activityDate]) {\n        newCompletions[activityDate] = {\n          completed: 0,\n          total: 0\n        };\n      }\n      if (completed) {\n        newCompletions[activityDate].completed += 1;\n      } else {\n        newCompletions[activityDate].completed = Math.max(0, newCompletions[activityDate].completed - 1);\n      }\n      return newCompletions;\n    });\n  };\n  useEffect(() => {\n    const newCompletions = {};\n\n    // First, count all activities by date\n    Object.keys(weeksData).forEach(weekKey => {\n      const weekActivities = weeksData[weekKey];\n\n      // Skip if weekActivities is not an array or is empty\n      if (!Array.isArray(weekActivities) || weekActivities.length === 0) {\n        return;\n      }\n      weekActivities.forEach(activity => {\n        // Skip if activity is not an object or doesn't have required properties\n        if (!activity || typeof activity !== 'object' || !('dia' in activity) || !('completado' in activity)) {\n          console.warn('Invalid activity data:', activity);\n          return;\n        }\n        const weekStart = parseISO(weekKey);\n        const dayIndex = days.indexOf(activity.dia);\n        if (dayIndex === -1) return;\n        try {\n          // Sumar 1 al dayIndex para corregir el desplazamiento de fechas\n          const activityDate = startOfDay(addDays(weekStart, dayIndex + 1));\n          const dateStr = format(activityDate, 'yyyy-MM-dd');\n          if (!newCompletions[dateStr]) {\n            newCompletions[dateStr] = {\n              completed: 0,\n              total: 0\n            };\n          }\n\n          // Count all activities for the day\n          newCompletions[dateStr].total += 1;\n\n          // Count completed activities\n          if (activity.completado) {\n            newCompletions[dateStr].completed += 1;\n          }\n        } catch (error) {\n          console.error('Error processing activity:', error, 'Activity:', activity);\n        }\n      });\n    });\n    setCompletions(prev => {\n      // Merge with existing completions to preserve any updates not in weeksData\n      const merged = {\n        ...newCompletions\n      };\n      Object.entries(prev).forEach(([date, data]) => {\n        if (!merged[date]) {\n          merged[date] = {\n            ...data\n          };\n        }\n      });\n      return merged;\n    });\n  }, [weeksData, days]);\n  if (isAuthLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-bg\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-card\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"login-title\",\n          children: \"Accediendo...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 532,\n      columnNumber: 7\n    }, this);\n  }\n  if (!user) {\n    const hasHadUser = Boolean(localStorage.getItem('hasHadUser'));\n\n    // Login/registro controlado\n    const handleForm = async e => {\n      e.preventDefault();\n      const formData = new FormData(e.target);\n      const username = formData.get('username');\n      setPendingUsername(username);\n      if (authMode === 'login') {\n        await handleLogin(username, 'login');\n      } else {\n        await handleLogin(username, 'register');\n      }\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-bg\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login-logo\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"logo-circle\",\n            children: \"\\uD83D\\uDFE6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 559,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 558,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"login-title\",\n          children: authMode === 'login' ? 'Welcome Back' : 'Crea tu cuenta'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 561,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"login-sub\",\n          children: authMode === 'login' ? 'Ingresa tu usuario y contraseÃ±a para acceder' : 'Elige tu usuario y contraseÃ±a para crear tu cuenta'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 562,\n          columnNumber: 11\n        }, this), loginError && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"login-error\",\n          children: loginError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 26\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"login-form\",\n          onSubmit: handleForm,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"login-field\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"username\",\n              placeholder: \"Nombre de usuario\",\n              autoComplete: \"username\",\n              required: true,\n              defaultValue: pendingUsername\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 570,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 569,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"login-btn\",\n            type: \"submit\",\n            children: authMode === 'login' ? 'Login' : 'Crear cuenta'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 572,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 568,\n          columnNumber: 11\n        }, this), authMode === 'register' && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center',\n            marginTop: 10\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"login-link\",\n            style: {\n              background: 'none',\n              border: 'none',\n              color: '#69f',\n              cursor: 'pointer'\n            },\n            onClick: () => {\n              setAuthMode('login');\n              setLoginError('');\n            },\n            children: \"Volver a inicio de sesi\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 576,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 575,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 557,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 556,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-bar\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"Bienvenido, \", user.username]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 587,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogout,\n        children: \"Salir\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 588,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 586,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"app-title\",\n      children: \"Agenda de Estudio\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 591,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(WeekNavigation, {\n      onPrev: () => navigateWeek('prev'),\n      onNext: () => navigateWeek('next'),\n      currentWeek: currentWeek,\n      onOpenCalendar: handleOpenCalendar,\n      onOpenFrequency: handleOpenFrequency,\n      onOpenSettings: handleOpenSettings\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 593,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"progress-summary\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: progressText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 603,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ProgressBar, {\n        progress: progress\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 604,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 602,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"week-view\",\n      children: days.map((day, index) => {\n        const dayDate = addDays(parseISO(currentWeek), index);\n        const isPast = isBefore(startOfDay(dayDate), today);\n        return activitiesByDay[day] && /*#__PURE__*/_jsxDEV(DayView, {\n          day: day,\n          dayNumber: getDayNumber(day),\n          activities: activitiesByDay[day],\n          onToggle: handleToggleActivity,\n          onDayClick: () => handleDayClick(day),\n          isToday: isCurrentDay(day),\n          isPast: isPast\n        }, day, false, {\n          fileName: _jsxFileName,\n          lineNumber: 613,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 607,\n      columnNumber: 7\n    }, this), isModalOpen && selectedDay && /*#__PURE__*/_jsxDEV(DayDetailModal, {\n      day: selectedDay,\n      activities: activitiesByDay[selectedDay] || [],\n      notes: notes[selectedDay] || '',\n      onToggleActivity: handleToggleActivity,\n      onSaveNotes: handleSaveNotes,\n      onClose: handleCloseModal,\n      onCheckAll: handleCheckAll,\n      onUncheckAll: handleUncheckAll\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 629,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(CalendarModal, {\n      isOpen: isCalendarModalOpen,\n      onClose: handleCloseCalendar,\n      completions: completions\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 641,\n      columnNumber: 7\n    }, this), showFrequencyModal && /*#__PURE__*/_jsxDEV(FrequencyModal, {\n      isOpen: showFrequencyModal,\n      onClose: () => setShowFrequencyModal(false),\n      activities: allActivities,\n      currentWeek: currentWeek\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 648,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(SettingsModal, {\n      isOpen: showSettingsModal,\n      onClose: handleCloseSettings,\n      onLogout: handleLogout,\n      onAddActivity: handleAddActivity,\n      currentWeekActivities: currentWeekData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 656,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 585,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"h6zh1rtXbNdcBtf+95oIjB09w8U=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useLocalStorage","WeekNavigation","DayView","DayDetailModal","defaultActivities","ProgressBar","format","startOfWeek","addDays","parseISO","isBefore","startOfDay","es","CalendarModal","FrequencyModal","SettingsModal","encryptData","decryptData","jsxDEV","_jsxDEV","generateUUID","replace","c","r","Math","random","v","toString","cleanDuplicatedActivities","activities","Array","isArray","uniqueIds","Set","filter","activity","id","has","add","App","_s","deviceId","localStorage","getItem","setItem","user","setUser","isAuthLoading","setIsAuthLoading","authMode","setAuthMode","pendingUsername","setPendingUsername","loginError","setLoginError","currentWeek","setCurrentWeek","today","Date","monday","weekStartsOn","weeksData","setWeeksData","username","trustedKey","trusted","JSON","parse","includes","key","stored","parsedData","cleanedData","Object","entries","forEach","week","stringify","e","console","error","saveCredentials","password","encrypted","loadCredentials","data","handleLogin","mode","userList","push","handleLogout","removeItem","initializeWeek","length","log","storedWeekData","prev","newWeekActivities","flatMap","day","acts","map","act","semana","dia","actividad","toLowerCase","completado","currentWeekData","allActivities","values","flat","handleToggleActivity","navigateWeek","direction","currentMonday","newMonday","completedCount","a","totalCount","progress","round","getProgressBarEmoji","percentage","progressText","days","uniqueActivitiesMap","Map","uniqueActivities","set","activitiesByDay","reduce","acc","getDayNumber","dayName","dayIndex","indexOf","weekStart","dayDate","todayFormatted","todayDayName","getDay","isCurrentDay","dayFormatted","isModalOpen","setIsModalOpen","selectedDay","setSelectedDay","notes","setNotes","completions","setCompletions","showFrequencyModal","setShowFrequencyModal","isCalendarModalOpen","setIsCalendarModalOpen","showSettingsModal","setShowSettingsModal","customActivities","setCustomActivities","handleSaveNotes","dayKey","newNotes","prevNotes","handleCheckAll","prevWeeksData","newWeeksData","handleUncheckAll","handleDayClick","handleCloseModal","handleOpenCalendar","handleCloseCalendar","handleOpenFrequency","handleOpenSettings","handleAddActivity","newActivity","weekKey","activityToAdd","now","existingIndex","findIndex","handleCloseSettings","updateCompletions","date","activityId","completed","dateStr","toISOString","split","newCompletions","total","activityDate","max","keys","weekActivities","warn","merged","className","children","fileName","_jsxFileName","lineNumber","columnNumber","hasHadUser","Boolean","handleForm","preventDefault","formData","FormData","target","get","onSubmit","type","name","placeholder","autoComplete","required","defaultValue","style","textAlign","marginTop","background","border","color","cursor","onClick","onPrev","onNext","onOpenCalendar","onOpenFrequency","onOpenSettings","index","isPast","dayNumber","onToggle","onDayClick","isToday","onToggleActivity","onSaveNotes","onClose","onCheckAll","onUncheckAll","isOpen","onLogout","onAddActivity","currentWeekActivities","_c","$RefreshReg$"],"sources":["/Users/cesarvargastapia/CascadeProjects/study-planner/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useLocalStorage } from './hooks/useLocalStorage';\nimport WeekNavigation from './components/WeekNavigation';\nimport DayView from './components/DayView';\nimport DayDetailModal from './components/DayDetailModal'; \nimport { defaultActivities } from './data/defaultActivities';\nimport ProgressBar from './components/ProgressBar';\nimport { format, startOfWeek, addDays, parseISO, isBefore, startOfDay } from 'date-fns';\nimport { es } from 'date-fns/locale';\nimport CalendarModal from './components/CalendarModal';\nimport FrequencyModal from './components/FrequencyModal';\nimport SettingsModal from './components/SettingsModal';\nimport { encryptData, decryptData } from './auth/cryptoUtils';\n\n// Utilidad simple para generar UUID v4\nfunction generateUUID() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    const r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\n// FunciÃ³n para limpiar actividades duplicadas\nconst cleanDuplicatedActivities = (activities) => {\n  if (!Array.isArray(activities)) return [];\n  \n  const uniqueIds = new Set();\n  return activities.filter(activity => {\n    if (!activity || !activity.id) return false;\n    if (uniqueIds.has(activity.id)) return false;\n    \n    uniqueIds.add(activity.id);\n    return true;\n  });\n};\n\nexport default function App() {\n  // ID Ãºnico de dispositivo confiable\n  const [deviceId] = useState(() => {\n    let id = localStorage.getItem('trustedDeviceId');\n    if (!id) {\n      id = generateUUID();\n      localStorage.setItem('trustedDeviceId', id);\n    }\n    return id;\n  });\n\n  const [user, setUser] = useState(null);\n  const [isAuthLoading, setIsAuthLoading] = useState(true);\n  // Hooks para control de login/registro\n  const [authMode, setAuthMode] = useState('login');\n  const [pendingUsername, setPendingUsername] = useState('');\n  const [loginError, setLoginError] = useState('');\n\n  const [currentWeek, setCurrentWeek] = useState(() => {\n    const today = new Date();\n    const monday = startOfWeek(today, { weekStartsOn: 1 });\n    return format(monday, 'yyyy-MM-dd');\n  });\n  \n  // Hook para datos de usuario actual (clave depende del usuario)\n  const [weeksData, setWeeksData] = useState({});\n\n  // Autologin si el dispositivo es confiable\n  useEffect(() => {\n    if (!user) {\n      const username = localStorage.getItem('lastLoggedUsername');\n      if (username) {\n        const trustedKey = `trustedDevices_${username}`;\n        let trusted = [];\n        try {\n          trusted = JSON.parse(localStorage.getItem(trustedKey)) || [];\n        } catch {}\n        if (trusted.includes(deviceId)) {\n          setUser({ username });\n        }\n      }\n      setIsAuthLoading(false);\n    } else {\n      setIsAuthLoading(false);\n    }\n  }, [deviceId, user]);\n\n  // Cargar datos del usuario autenticado\n  useEffect(() => {\n    if (user && user.username) {\n      const key = `studyPlannerData_${user.username}`;\n      const stored = localStorage.getItem(key);\n      \n      if (stored) {\n        try {\n          const parsedData = JSON.parse(stored);\n          // Limpiar datos duplicados al cargar\n          const cleanedData = {};\n          Object.entries(parsedData).forEach(([week, activities]) => {\n            cleanedData[week] = cleanDuplicatedActivities(activities);\n          });\n          \n          setWeeksData(cleanedData);\n          // Guardar datos limpios\n          localStorage.setItem(key, JSON.stringify(cleanedData));\n        } catch (e) {\n          console.error('Error al cargar datos del usuario:', e);\n          setWeeksData({});\n        }\n      } else {\n        setWeeksData({});\n      }\n    } else {\n      setWeeksData({});\n    }\n  }, [user]);\n\n  // Guardar datos automÃ¡ticamente cuando cambian y hay usuario\n  useEffect(() => {\n    if (user && user.username) {\n      const key = `studyPlannerData_${user.username}`;\n      localStorage.setItem(key, JSON.stringify(weeksData));\n    }\n  }, [weeksData, user]);\n\n  const saveCredentials = async (username, password) => {\n    try {\n      const encrypted = await encryptData(JSON.stringify({ username }), password);\n      localStorage.setItem('userCredentials', JSON.stringify(encrypted));\n      setUser({ username });\n      setLoginError('');\n    } catch (error) {\n      setLoginError('Error al guardar credenciales');\n      console.error(error);\n    }\n  };\n\n  const loadCredentials = async (password) => {\n    try {\n      const encrypted = JSON.parse(localStorage.getItem('userCredentials'));\n      if (!encrypted) return null;\n      \n      const data = await decryptData(encrypted, password);\n      return JSON.parse(data);\n    } catch (error) {\n      setLoginError('Credenciales invÃ¡lidas');\n      return null;\n    }\n  };\n\n  const handleLogin = async (username, mode = 'login') => {\n    // Obtiene la lista de usuarios\n    let userList = [];\n    try {\n      userList = JSON.parse(localStorage.getItem('userList')) || [];\n    } catch {}\n\n    if (mode === 'login') {\n      if (!userList.includes(username)) {\n        setLoginError('Ese usuario no existe. Â¿Quieres crear una cuenta?');\n        setAuthMode('register');\n        setPendingUsername(username);\n        return;\n      }\n    }\n\n    // Login directo por username\n    if (mode === 'login') {\n      setUser({ username });\n      setLoginError('');\n      localStorage.setItem('lastLoggedUsername', username);\n      localStorage.setItem('hasHadUser', 'true');\n      // Agregar este dispositivo a la lista de confianza\n      const trustedKey = `trustedDevices_${username}`;\n      let trusted = [];\n      try {\n        trusted = JSON.parse(localStorage.getItem(trustedKey)) || [];\n      } catch {}\n      if (!trusted.includes(deviceId)) {\n        trusted.push(deviceId);\n        localStorage.setItem(trustedKey, JSON.stringify(trusted));\n      }\n    } else {\n      // Crear usuario nuevo\n      localStorage.setItem('lastLoggedUsername', username);\n      localStorage.setItem('hasHadUser', 'true');\n      if (!userList.includes(username)) {\n        userList.push(username);\n        localStorage.setItem('userList', JSON.stringify(userList));\n      }\n      const trustedKey = `trustedDevices_${username}`;\n      localStorage.setItem(trustedKey, JSON.stringify([deviceId]));\n      setUser({ username });\n      setLoginError('');\n    }\n  }; \n\n  const handleLogout = () => {\n    if (user && user.username) {\n      // Eliminar este dispositivo de la lista de confianza\n      const trustedKey = `trustedDevices_${user.username}`;\n      let trusted = [];\n      try {\n        trusted = JSON.parse(localStorage.getItem(trustedKey)) || [];\n      } catch {}\n      trusted = trusted.filter(id => id !== deviceId);\n      localStorage.setItem(trustedKey, JSON.stringify(trusted));\n    }\n    localStorage.removeItem('userCredentials');\n    localStorage.removeItem('lastLoggedUsername');\n    setUser(null);\n  };\n\n\n  useEffect(() => {\n    const initializeWeek = () => {\n      // Inicializar solo si la semana no existe o estÃ¡ vacÃ­a\n      if (weeksData[currentWeek] && weeksData[currentWeek].length > 0) return;\n      \n      console.log(`Inicializando semana: ${currentWeek}`);\n      \n      // Verificar si ya hay actividades para esta semana en localStorage\n      const storedWeekData = localStorage.getItem(`week_${currentWeek}`);\n      \n      if (storedWeekData) {\n        // Si hay datos guardados, usarlos\n        try {\n          const parsedData = JSON.parse(storedWeekData);\n          setWeeksData(prev => ({\n            ...prev,\n            [currentWeek]: parsedData\n          }));\n          return;\n        } catch (e) {\n          console.error('Error al cargar datos de la semana:', e);\n        }\n      }\n      \n      // Si no hay datos guardados, crear actividades por defecto\n      const newWeekActivities = Object.entries(defaultActivities).flatMap(([day, acts]) =>\n        acts.map(act => ({\n          ...act,\n          semana: currentWeek,\n          dia: day,\n          id: `${currentWeek}-${day}-${act.actividad}`.toLowerCase().replace(/\\s+/g, '-'),\n          completado: false\n        }))\n      );\n      \n      // Guardar en localStorage para futuras cargas\n      localStorage.setItem(`week_${currentWeek}`, JSON.stringify(newWeekActivities));\n      \n      setWeeksData(prev => ({\n        ...prev,\n        [currentWeek]: newWeekActivities\n      }));\n    };\n\n    initializeWeek();\n  }, [currentWeek, weeksData, setWeeksData]);\n\n  const currentWeekData = Array.isArray(weeksData[currentWeek]) ? weeksData[currentWeek] : [];\n\n  const allActivities = Object.values(weeksData).flat();\n\n  const handleToggleActivity = (id) => {\n    setWeeksData(prev => ({\n      ...prev,\n      [currentWeek]: prev[currentWeek].map(act =>\n        act.id === id ? { ...act, completado: !act.completado } : act\n      ),\n    }));\n  };\n  \n  const navigateWeek = (direction) => {\n    const currentMonday = parseISO(currentWeek);\n    const newMonday = addDays(currentMonday, direction === 'next' ? 7 : -7);\n    setCurrentWeek(format(newMonday, 'yyyy-MM-dd'));\n  };\n  \n  const completedCount = currentWeekData.filter(a => a.completado).length;\n  const totalCount = currentWeekData.length;\n  const progress = totalCount > 0 ? Math.round((completedCount / totalCount) * 100) : 0;\n\n  const getProgressBarEmoji = (percentage) => {\n    if (percentage === 100) return 'ðŸŽ‰';\n    if (percentage >= 75) return 'ðŸ’ª';\n    if (percentage >= 50) return 'ðŸš€';\n    if (percentage >= 25) return 'âœ¨';\n    return 'ðŸ“š';\n  };\n\n  const progressText = `Progreso: ${completedCount}/${totalCount} actividades ${getProgressBarEmoji(progress)}`;\n  \n  const days = ['Lunes', 'Martes', 'MiÃ©rcoles', 'Jueves', 'Viernes', 'SÃ¡bado', 'Domingo'];\n  \n  // Create a map to track unique activities by ID\n  const uniqueActivitiesMap = new Map();\n  \n  // Filter out duplicates by using the activity ID\n  const uniqueActivities = (currentWeekData || []).filter(activity => {\n    if (!activity || !activity.id || !activity.dia) return false;\n    \n    // If we've already seen this activity, skip it\n    if (uniqueActivitiesMap.has(activity.id)) {\n      return false;\n    }\n    \n    // Otherwise, add it to our map and include it\n    uniqueActivitiesMap.set(activity.id, true);\n    return true;\n  });\n  \n  // Group activities by day\n  const activitiesByDay = uniqueActivities.reduce((acc, activity) => {\n    const day = activity.dia;\n    if (!acc[day]) acc[day] = [];\n    acc[day].push(activity);\n    return acc;\n  }, {});\n  \n  // Ensure all days exist in the object, even if empty\n  days.forEach(day => {\n    if (!activitiesByDay[day]) {\n      activitiesByDay[day] = [];\n    }\n  });\n  \n  const getDayNumber = (dayName) => {\n    const dayIndex = days.indexOf(dayName);\n    if (dayIndex === -1) return '';\n    \n    const weekStart = parseISO(currentWeek);\n    const dayDate = addDays(weekStart, dayIndex);\n    return format(dayDate, 'd');\n  };\n  \n  const today = startOfDay(new Date());\n  const todayFormatted = format(today, 'yyyy-MM-dd');\n  const todayDayName = days[today.getDay() === 0 ? 6 : today.getDay() - 1]; \n  \n  const isCurrentDay = (dayName) => {\n    const weekStart = parseISO(currentWeek);\n    const dayIndex = days.indexOf(dayName);\n    const dayDate = addDays(weekStart, dayIndex);\n    \n    const dayFormatted = format(dayDate, 'yyyy-MM-dd');\n    \n    return dayFormatted === todayFormatted;\n  };\n\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [selectedDay, setSelectedDay] = useState(null);\n  const [notes, setNotes] = useState({}); \n  const [completions, setCompletions] = useState({});\n  const [showFrequencyModal, setShowFrequencyModal] = useState(false);\n  const [isCalendarModalOpen, setIsCalendarModalOpen] = useState(false);\n  const [showSettingsModal, setShowSettingsModal] = useState(false);\n  const [customActivities, setCustomActivities] = useState({});\n\n  const handleSaveNotes = (dayKey, newNotes) => {\n    setNotes(prevNotes => ({ ...prevNotes, [dayKey]: newNotes }));\n  };\n\n  const handleCheckAll = (dayKey) => {\n    setWeeksData(prevWeeksData => {\n      const newWeeksData = { ...prevWeeksData };\n      newWeeksData[currentWeek] = newWeeksData[currentWeek].map(activity =>\n        activity.dia === dayKey ? { ...activity, completado: true } : activity\n      );\n      return newWeeksData;\n    });\n  };\n\n  const handleUncheckAll = (dayKey) => {\n    setWeeksData(prevWeeksData => {\n      const newWeeksData = { ...prevWeeksData };\n      newWeeksData[currentWeek] = newWeeksData[currentWeek].map(activity =>\n        activity.dia === dayKey ? { ...activity, completado: false } : activity\n      );\n      return newWeeksData;\n    });\n  };\n\n  const handleDayClick = (day) => {\n    setSelectedDay(day);\n    setIsModalOpen(true);\n  };\n\n  const handleCloseModal = () => {\n    setIsModalOpen(false);\n    setSelectedDay(null);\n  };\n\n  const handleOpenCalendar = () => {\n    setIsCalendarModalOpen(true);\n  };\n\n  const handleCloseCalendar = () => {\n    setIsCalendarModalOpen(false);\n  };\n\n  const handleOpenFrequency = () => {\n    setShowFrequencyModal(true);\n  };\n\n  const handleOpenSettings = () => {\n    setShowSettingsModal(true);\n  };\n\n  const handleAddActivity = (newActivity, day) => {\n    setWeeksData(prevWeeksData => {\n      const newWeeksData = { ...prevWeeksData };\n      const weekKey = currentWeek; // Use the current week from state\n      \n      // Initialize the week if it doesn't exist\n      if (!newWeeksData[weekKey]) {\n        newWeeksData[weekKey] = [];\n      }\n      \n      // Add the new activity with the correct structure\n      const activityToAdd = {\n        ...newActivity,\n        semana: weekKey,\n        dia: day,\n        id: `${weekKey}-${day}-${newActivity.actividad}-${Date.now()}`\n      };\n      \n      // Check if activity with same ID already exists\n      const existingIndex = newWeeksData[weekKey].findIndex(\n        act => act.id === activityToAdd.id\n      );\n      \n      if (existingIndex >= 0) {\n        // Update existing activity\n        newWeeksData[weekKey][existingIndex] = activityToAdd;\n      } else {\n        // Add new activity\n        newWeeksData[weekKey] = [\n          ...(newWeeksData[weekKey] || []),\n          activityToAdd\n        ];\n      }\n      \n      // Save to localStorage\n      localStorage.setItem('weeksData', JSON.stringify(newWeeksData));\n      \n      return newWeeksData;\n    });\n  };\n\n  const handleCloseSettings = () => {\n    setShowSettingsModal(false);\n  };\n\n  const updateCompletions = (date, activityId, completed) => {\n    setCompletions(prev => {\n      const dateStr = date.toISOString().split('T')[0];\n      const newCompletions = { ...prev };\n      if (!newCompletions[dateStr]) {\n        newCompletions[dateStr] = { completed: 0, total: 0 };\n      }\n      // Update the count based on completion status\n      const activityDate = format(date, 'yyyy-MM-dd');\n      if (!newCompletions[activityDate]) {\n        newCompletions[activityDate] = { completed: 0, total: 0 };\n      }\n      if (completed) {\n        newCompletions[activityDate].completed += 1;\n      } else {\n        newCompletions[activityDate].completed = Math.max(0, newCompletions[activityDate].completed - 1);\n      }\n      return newCompletions;\n    });\n  };\n\n  useEffect(() => {\n    const newCompletions = {};\n    \n    // First, count all activities by date\n    Object.keys(weeksData).forEach(weekKey => {\n      const weekActivities = weeksData[weekKey];\n      \n      // Skip if weekActivities is not an array or is empty\n      if (!Array.isArray(weekActivities) || weekActivities.length === 0) {\n        return;\n      }\n      \n      weekActivities.forEach(activity => {\n        // Skip if activity is not an object or doesn't have required properties\n        if (!activity || typeof activity !== 'object' || !('dia' in activity) || !('completado' in activity)) {\n          console.warn('Invalid activity data:', activity);\n          return;\n        }\n        \n        const weekStart = parseISO(weekKey);\n        const dayIndex = days.indexOf(activity.dia);\n        if (dayIndex === -1) return;\n        \n        try {\n          // Sumar 1 al dayIndex para corregir el desplazamiento de fechas\n          const activityDate = startOfDay(addDays(weekStart, dayIndex + 1));\n          const dateStr = format(activityDate, 'yyyy-MM-dd');\n          \n          if (!newCompletions[dateStr]) {\n            newCompletions[dateStr] = { completed: 0, total: 0 };\n          }\n          \n          // Count all activities for the day\n          newCompletions[dateStr].total += 1;\n          \n          // Count completed activities\n          if (activity.completado) {\n            newCompletions[dateStr].completed += 1;\n          }\n        } catch (error) {\n          console.error('Error processing activity:', error, 'Activity:', activity);\n        }\n      });\n    });\n    \n    setCompletions(prev => {\n      // Merge with existing completions to preserve any updates not in weeksData\n      const merged = { ...newCompletions };\n      Object.entries(prev).forEach(([date, data]) => {\n        if (!merged[date]) {\n          merged[date] = { ...data };\n        }\n      });\n      return merged;\n    });\n  }, [weeksData, days]);\n\n  if (isAuthLoading) {\n    return (\n      <div className=\"login-bg\">\n        <div className=\"login-card\">\n          <h2 className=\"login-title\">Accediendo...</h2>\n        </div>\n      </div>\n    );\n  }\n  if (!user) {\n    const hasHadUser = Boolean(localStorage.getItem('hasHadUser'));\n\n    // Login/registro controlado\n    const handleForm = async (e) => {\n      e.preventDefault();\n      const formData = new FormData(e.target);\n      const username = formData.get('username');\n      setPendingUsername(username);\n      if (authMode === 'login') {\n        await handleLogin(username, 'login');\n      } else {\n        await handleLogin(username, 'register');\n      }\n    };\n\n    return (\n      <div className=\"login-bg\">\n        <div className=\"login-card\">\n          <div className=\"login-logo\">\n            <span className=\"logo-circle\">ðŸŸ¦</span>\n          </div>\n          <h2 className=\"login-title\">{authMode === 'login' ? 'Welcome Back' : 'Crea tu cuenta'}</h2>\n          <p className=\"login-sub\">\n            {authMode === 'login'\n              ? 'Ingresa tu usuario y contraseÃ±a para acceder'\n              : 'Elige tu usuario y contraseÃ±a para crear tu cuenta'}\n          </p>\n          {loginError && <p className=\"login-error\">{loginError}</p>}\n          <form className=\"login-form\" onSubmit={handleForm}>\n            <div className=\"login-field\">\n              <input type=\"text\" name=\"username\" placeholder=\"Nombre de usuario\" autoComplete=\"username\" required defaultValue={pendingUsername} />\n            </div>\n            <button className=\"login-btn\" type=\"submit\">{authMode === 'login' ? 'Login' : 'Crear cuenta'}</button>\n          </form>\n          {authMode === 'register' && (\n            <div style={{textAlign:'center',marginTop:10}}>\n              <button className=\"login-link\" style={{background:'none',border:'none',color:'#69f',cursor:'pointer'}} onClick={()=>{setAuthMode('login');setLoginError('');}}>Volver a inicio de sesiÃ³n</button>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"app\">\n      <div className=\"user-bar\">\n        <span>Bienvenido, {user.username}</span>\n        <button onClick={handleLogout}>Salir</button>\n      </div>\n      \n      <h1 className=\"app-title\">Agenda de Estudio</h1>\n      \n      <WeekNavigation \n        onPrev={() => navigateWeek('prev')} \n        onNext={() => navigateWeek('next')} \n        currentWeek={currentWeek} \n        onOpenCalendar={handleOpenCalendar}\n        onOpenFrequency={handleOpenFrequency}\n        onOpenSettings={handleOpenSettings}\n      />\n      \n      <div className=\"progress-summary\">\n        <p>{progressText}</p>\n        <ProgressBar progress={progress} />\n      </div>\n      \n      <div className=\"week-view\">\n        {days.map((day, index) => {\n          const dayDate = addDays(parseISO(currentWeek), index);\n          const isPast = isBefore(startOfDay(dayDate), today);\n          return (\n            activitiesByDay[day] && (\n              <DayView \n                key={day} \n                day={day} \n                dayNumber={getDayNumber(day)}\n                activities={activitiesByDay[day]} \n                onToggle={handleToggleActivity} \n                onDayClick={() => handleDayClick(day)}\n                isToday={isCurrentDay(day)}\n                isPast={isPast}\n              />\n            )\n          );\n        })}\n      </div>\n\n      {isModalOpen && selectedDay && (\n        <DayDetailModal\n          day={selectedDay} \n          activities={activitiesByDay[selectedDay] || []}\n          notes={notes[selectedDay] || ''}\n          onToggleActivity={handleToggleActivity}\n          onSaveNotes={handleSaveNotes}\n          onClose={handleCloseModal}\n          onCheckAll={handleCheckAll}\n          onUncheckAll={handleUncheckAll}\n        />\n      )}\n      \n      <CalendarModal \n        isOpen={isCalendarModalOpen} \n        onClose={handleCloseCalendar}\n        completions={completions}\n      />\n      \n      {showFrequencyModal && (\n        <FrequencyModal\n          isOpen={showFrequencyModal}\n          onClose={() => setShowFrequencyModal(false)}\n          activities={allActivities}\n          currentWeek={currentWeek}\n        />\n      )}\n      \n      <SettingsModal \n        isOpen={showSettingsModal} \n        onClose={handleCloseSettings} \n        onLogout={handleLogout}\n        onAddActivity={handleAddActivity}\n        currentWeekActivities={currentWeekData}\n      />\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}